/* Custom overrides for Stream Chat to match WhatsApp/Konvos theme */

.konvos-theme {
  --primary-color: #00a884;
  --bg-color: #efeae2;
  --message-bubble-own-bg: #d9fdd3;
  --message-bubble-bg: #ffffff;
}

/* Animated flowing background with curves */
@keyframes flowingGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes floatingCurves {
  0% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(180deg); }
  100% { transform: translateY(0px) rotate(360deg); }
}

/* Chat List flowing background - light multicolor gradient */
.chat-list-flowing-bg {
  background: linear-gradient(-45deg, #fef5e7, #fce4d6, #f5e6d3, #e8d5c4, #fef5e7);
  background-size: 400% 400%;
  animation: flowingGradient 20s ease infinite;
  position: relative;
  overflow: hidden;
}

.chat-list-flowing-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" opacity="0.08"><path d="M0,400 Q300,300 600,400 T1200,400" fill="none" stroke="rgba(0,168,132,0.3)" stroke-width="2"/><path d="M0,300 Q300,200 600,300 T1200,300" fill="none" stroke="rgba(124,179,150,0.2)" stroke-width="1.5"/><path d="M0,500 Q300,600 600,500 T1200,500" fill="none" stroke="rgba(173,216,230,0.2)" stroke-width="1.5"/><path d="M0,200 Q300,100 600,200 T1200,200" fill="none" stroke="rgba(255,182,193,0.15)" stroke-width="1"/><path d="M0,600 Q300,700 600,600 T1200,600" fill="none" stroke="rgba(221,160,221,0.15)" stroke-width="1"/></svg>');
  background-size: 1200px 800px;
  animation: floatingCurves 15s ease-in-out infinite;
  pointer-events: none;
}

/* Chat Panel flowing background - light multicolor gradient */
.chat-panel-flowing-bg {
  background: linear-gradient(-45deg, #fff8e7, #fef3cd, #fce8c3, #f5e6d3, #fff8e7) !important;
  background-size: 400% 400% !important;
  animation: flowingGradient 25s ease infinite !important;
  position: relative !important;
  overflow: hidden !important;
}

.chat-panel-flowing-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" opacity="0.06"><path d="M0,400 Q300,300 600,400 T1200,400" fill="none" stroke="rgba(0,168,132,0.25)" stroke-width="2"/><path d="M0,300 Q300,200 600,300 T1200,300" fill="none" stroke="rgba(124,179,150,0.15)" stroke-width="1.5"/><path d="M0,500 Q300,600 600,500 T1200,500" fill="none" stroke="rgba(173,216,230,0.15)" stroke-width="1.5"/><path d="M0,200 Q300,100 600,200 T1200,200" fill="none" stroke="rgba(255,182,193,0.1)" stroke-width="1"/><path d="M0,600 Q300,700 600,600 T1200,600" fill="none" stroke="rgba(221,160,221,0.1)" stroke-width="1"/></svg>');
  background-size: 1200px 800px;
  animation: floatingCurves 18s ease-in-out infinite;
  pointer-events: none;
  z-index: 0;
}

.str-chat__channel-list {
  height: 100%;
  overflow-y: auto;
  position: relative;
  z-index: 2;
}

/* Style for empty state messaging */
.str-chat__empty-state {
  position: relative;
  z-index: 3;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  padding: 40px;
  margin: auto;
  text-align: center;
  color: rgba(0, 0, 0, 0.5);
}

.str-chat__channel-preview-messenger--active {
  background-color: rgba(0, 168, 132, 0.1);
  border-left: none;
}

.str-chat__header-livestream {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #f0f2f5;
  border-bottom: 1px solid #e9edef;
  height: 60px;
  padding: 0 16px;
}

.str-chat__list .str-chat__header-livestream {
  display: none;
}

/* Ensure background image covers the whole chat window */
.str-chat__main-panel {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.str-chat__list {
  background-color: transparent;
}

.str-chat__ul.str-chat__list {
  background-color: transparent;
}

.str-chat__channel {
  background: none !important;
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 1;
}

/* Force list container to be visible and scrollable */
.str-chat__channel-list {
  height: 100%;
  width: 100%;
  overflow-y: auto;
  background-color: #ffffff;
}

/* Ensure the main panel takes full height */
.str-chat__main-panel {
  height: 100%;
  width: 100%;
  flex: 1;
}

/* Override Stream's default white background on the window if present */
.str-chat__container {
  background-color: transparent;
}

.str-chat__message-simple__content--own {
  background-color: var(--message-bubble-own-bg);
  border-radius: 7.5px;
  border-top-right-radius: 0;
}

.str-chat__message-simple__content--other {
  background-color: var(--message-bubble-bg);
  border-radius: 7.5px;
  border-top-left-radius: 0;
}

.str-chat__input-flat,
.str-chat__input-flat-wrapper {
  background-color: #f0f2f5 !important;
  padding: 10px 16px !important;
  position: relative !important;
  z-index: 10 !important;
  display: flex !important;
  width: 100% !important;
  height: auto !important;
  min-height: 60px !important;
  flex-shrink: 0 !important;
  border: none !important;
}

.dark .str-chat__input-flat,
.dark .str-chat__input-flat-wrapper {
  background-color: #2a2a2a !important;
}

.str-chat__send-button {
  color: #54656f;
}

.str-chat__date-separator-date {
  background-color: #ffffff;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
  color: #54656f;
  font-size: 12.5px;
  padding: 5px 12px;
  border-radius: 7.5px;
  text-transform: uppercase;
}

/* Hide thread button on message hover */
.str-chat__message-actions-box button[aria-label="Thread reply"],
.str-chat__message-simple__actions button[data-testid*="thread"],
.str-chat__message-options .str-chat__message-actions-container button:has(svg[data-testid*="thread"]),
[data-testid="message-options-thread"],
.str-chat__message-actions-list button:has([data-testid*="thread"]),
button.str-chat__message-actions-list-item--thread,
.str-chat__message-simple-thread-button,
.str-chat__message-options-thread,
.str-chat__message-team__actions button[aria-label*="Thread"],
.str-chat__message-team__actions button[aria-label*="thread"],
.str-chat__message-simple__actions__action--thread {
  display: none !important;
}

/* Hide mark as unread button */
.str-chat__message-actions-box button[aria-label="Mark as unread"],
.str-chat__message-actions-list button:has(span:contains("Mark as unread")),
[data-testid="message-options-mark-as-unread"],
button.str-chat__message-actions-list-item--mark-unread,
.str-chat__message-actions-list-item[data-testid*="unread"],
.str-chat__message-simple__actions__action--unread {
  display: none !important;
}

/* Hide pin message button */
.str-chat__message-actions-box button[aria-label="Pin"],
.str-chat__message-actions-list button:has(span:contains("Pin")),
[data-testid="message-options-pin"],
button.str-chat__message-actions-list-item--pin,
.str-chat__message-actions-list-item[data-testid*="pin"],
.str-chat__message-simple__actions__action--pin {
  display: none !important;
}

/* Emoji picker styling */
.emoji-picker-container {
  position: absolute;
  bottom: 100%;
  left: 0;
  z-index: 100;
  margin-bottom: 8px;
}

.emoji-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 4px;
  padding: 12px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
  max-height: 200px;
  overflow-y: auto;
}

.emoji-btn {
  font-size: 20px;
  padding: 6px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
  border: none;
  background: transparent;
}

.emoji-btn:hover {
  background-color: #f0f2f5;
  transform: scale(1.15);
}

/* Single reaction styling */
.str-chat__message-reactions-list {
  display: flex;
  gap: 4px;
}

.str-chat__message-reaction-selector {
  display: flex;
  gap: 4px;
}

/* Additional hiding for Stream SDK built-in actions */
.str-chat__message-actions-list-item--thread,
.str-chat__message-actions-list-item--pin,
.str-chat__message-actions-list-item--mark-unread,
[data-testid="thread-action"],
[data-testid="pin-action"],
[data-testid="mark-unread-action"],
button[title="Reply in thread"],
button[title="Pin message"],
button[title="Mark as unread"],
.str-chat__message-commerce__actions__action--thread,
.str-chat__message-team__actions__action--thread,
.str-chat__message-simple-reply-button {
  display: none !important;
}

/* Hide message actions we don't want */
.str-chat__message-actions-list li:has(button[aria-label*="thread"]),
.str-chat__message-actions-list li:has(button[aria-label*="Thread"]),
.str-chat__message-actions-list li:has(button[aria-label*="pin"]),
.str-chat__message-actions-list li:has(button[aria-label*="Pin"]),
.str-chat__message-actions-list li:has(button[aria-label*="unread"]),
.str-chat__message-actions-list li:has(button[aria-label*="Unread"]) {
  display: none !important;
}

/* Improved message styling */
.str-chat__message-simple {
  margin: 4px 0;
}

.str-chat__message-text-inner {
  border-radius: 8px;
}

/* Better input styling */
.str-chat__message-input {
  background: transparent;
}

/* Smooth scrollbar for chat list */
.str-chat__channel-list::-webkit-scrollbar,
.str-chat__list::-webkit-scrollbar {
  width: 6px;
}

.str-chat__channel-list::-webkit-scrollbar-track,
.str-chat__list::-webkit-scrollbar-track {
  background: transparent;
}

.str-chat__channel-list::-webkit-scrollbar-thumb,
.str-chat__list::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.str-chat__channel-list::-webkit-scrollbar-thumb:hover,
.str-chat__list::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* Reply message styling */
.str-chat__quoted-message-preview {
  background-color: rgba(0, 168, 132, 0.1);
  border-left: 3px solid #00a884;
  border-radius: 4px;
  padding: 8px;
  margin-bottom: 4px;
}

/* Active channel highlight */
.str-chat__channel-preview--active {
  background: linear-gradient(90deg, rgba(0, 168, 132, 0.15), transparent);
}

/* Dark mode styles */
.dark .str-chat__list {
  background-color: #1a1a1a !important;
}

.dark .str-chat__channel-list {
  background-color: #1a1a1a !important;
}

.dark .str-chat__channel-preview-messenger {
  color: #e0e0e0;
}

.dark .str-chat__channel-preview-messenger:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.dark .str-chat__message-simple__content--own {
  background-color: #00a884;
  color: white;
}

.dark .str-chat__message-simple__content--other {
  background-color: #2a2a2a;
  color: #e0e0e0;
}

.dark .str-chat__message-text-inner {
  color: inherit;
}

.dark .str-chat__input-flat input::placeholder {
  color: #888;
}

.dark .str-chat__input-flat input,
.dark input[type="text"] {
  background-color: #333 !important;
  color: #e0e0e0 !important;
  border: 1px solid #444 !important;
}

.dark .str-chat__input-flat button {
  color: #888 !important;
}

.dark .str-chat__input-flat button:hover {
  background-color: rgba(255, 255, 255, 0.1) !important;
}

/* Ensure input takes proper width */
form {
  width: 100%;
  display: flex;
}

form input[type="text"] {
  width: 100%;
}
